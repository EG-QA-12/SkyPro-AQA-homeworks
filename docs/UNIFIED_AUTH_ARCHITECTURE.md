# üèóÔ∏è –£–ù–ò–§–ò–¶–ò–†–û–í–ê–ù–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò

## üìã –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï

### –ü—Ä–æ–±–ª–µ–º—ã —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
1. **–§—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - 4 —Ä–∞–∑–Ω—ã—Ö –º–æ–¥—É–ª—è –≤ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö
2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –ø–æ–ª—É—á–µ–Ω–∏–µ –∫—É–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
3. **–†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏** - –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API, –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É–º–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
4. **–ü—Ä–æ–±–ª–µ–º—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏** - —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö, –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
#### –û—Å–Ω–æ–≤–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏:
- `framework/auth/auth_manager.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `framework/utils/simple_api_auth.py` - –ø—Ä–æ—Å—Ç–∞—è API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `framework/utils/smart_auth_manager.py` - —É–º–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∫—É–∫–∏
- `framework/utils/api_auth.py` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `framework/utils/auth_operations.py` - GUI –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `framework/utils/auth_cookie_provider.py` - –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∫—É–∫–∏
- `framework/auth/cookie_provider.py` - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- `framework/utils/auth_utils.py` - —É—Ç–∏–ª–∏—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (2 –≤–µ—Ä—Å–∏–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö)

#### –§–∏–∫—Å—Ç—É—Ä—ã –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `framework/fixtures/auth_fixtures.py` - —Ñ–∏–∫—Å—Ç—É—Ä—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (browser_context, authenticated_admin, authenticated_user, clean_context, isolated_context, quick_auth)
- `framework/utils/cookie_constants.py` - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫—É–∫–∞–º–∏
- `framework/utils/cookie_helper.py` - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫—É–∫–∞–º–∏

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ—Å—Ç–∞—Ö:
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `SmartAuthManager` –¥–ª—è —É–º–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ–∏–∫—Å—Ç—É—Ä—ã –∏–∑ `auth_fixtures.py` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –º—É–ª—å—Ç–∏-–¥–æ–º–µ–Ω–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `allow-session` –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ–±—Ö–æ–¥–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –±–æ—Ç–æ–≤
- –í —Ç–µ—Å—Ç–∞—Ö –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —É–º–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –∫—É–∫–∏ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

## üéØ –£–ù–ò–§–ò–¶–ò–†–û–í–ê–ù–ù–´–ô –ü–û–î–•–û–î

### 1. –ï–¥–∏–Ω—ã–π AuthService —Å —Ñ–∞—Å–∞–¥–Ω—ã–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º

```python
# framework/auth/service.py
class AuthService:
    """
    –ï–¥–∏–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å —Ñ–∞—Å–∞–¥–Ω—ã–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º.
    
    –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
    - API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (requests)
    - UI –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Playwright)
    - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
    - –ú–∞—Å—Å–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
    """
    
    def __init__(self):
        self._api_auth = APIAuthProvider()
        self._ui_auth = UIAuthProvider()
        self._cache = AuthCache()
        self._validator = CookieValidator()
    
    def get_session_cookie(self, role: str = "admin", 
                          mode: AuthMode = AuthMode.AUTO) -> AuthResult:
        """–ï–¥–∏–Ω—ã–π –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤"""
        
    def validate_session(self, cookie: str) -> bool:
        """–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏"""
        
    def mass_authenticate(self, users: List[Dict]) -> MassAuthResult:
        """–ú–∞—Å—Å–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º"""
```

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
framework/
‚îî‚îÄ‚îÄ auth/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ service.py              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞—Å–∞–¥–Ω—ã–π —Å–µ—Ä–≤–∏—Å
    ‚îú‚îÄ‚îÄ providers/
    ‚îÇ   ‚îú‚îÄ‚îÄ api_provider.py     # API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (requests)
    ‚îÇ   ‚îú‚îÄ‚îÄ ui_provider.py      # UI –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Playwright)
    ‚îÇ   ‚îî‚îÄ‚îÄ cache_provider.py   # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
    ‚îú‚îÄ‚îÄ validators/
    ‚îÇ   ‚îî‚îÄ‚îÄ cookie_validator.py # –í–∞–ª–∏–¥–∞—Ü–∏—è –∫—É–∫
    ‚îú‚îÄ‚îÄ types.py                # –û–±—â–∏–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
    ‚îî‚îÄ‚îÄ legacy.py               # –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
```

### 3. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

#### 3.1 –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```python
# –í–º–µ—Å—Ç–æ —Ä–∞–∑–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤:
from framework.utils.smart_auth_manager import SmartAuthManager
from framework.auth.auth_manager import get_session_cookie
from framework.utils.simple_api_auth import mass_api_auth
from framework.utils.api_auth import APIAuthManager
from framework.utils.auth_operations import AuthOperations
from framework.utils.auth_cookie_provider import AuthCookieProvider
from framework.utils.auth_utils import load_cookie, save_cookie, validate_cookie
from framework.fixtures.auth_fixtures import authenticated_admin, authenticated_user

# –û–¥–∏–Ω –∏–º–ø–æ—Ä—Ç –¥–ª—è –≤—Å–µ–≥–æ:
from framework.auth.service import AuthService

auth = AuthService()
cookie = auth.get_session_cookie("admin")  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–∏–π –º–µ—Ç–æ–¥
```

#### 3.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ –≤—Å–µ–º–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (API, UI, –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω–∞—è)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–∏–∫—Å—Ç—É—Ä–∞–º–∏ pytest
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å allow-session –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –±–æ—Ç–æ–≤
- –†–∞–±–æ—Ç–∞ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –∫—É–∫ (JSON Playwright, —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É–º–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –∫—É–∫–∏ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–æ–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å URL (url_utils)

#### 3.3 –£–ª—É—á—à–µ–Ω–Ω–∞—è –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å
- GUI —Ä–µ–∂–∏–º: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ + –≤–∞–ª–∏–¥–∞—Ü–∏—é
- Headless —Ä–µ–∂–∏–º: –ü—Ä—è–º–∞—è API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

#### 3.3 –£–ª—É—á—à–µ–Ω–Ω–∞—è –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å
```python
# –î–µ—Ç–∞–ª—å–Ω–∞—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è
auth_result = auth.get_session_cookie("admin")
print(f"–ú–µ—Ç–æ–¥: {auth_result.method}")
print(f"–í—Ä–µ–º—è: {auth_result.duration}")
print(f"–ö—ç—à–∏—Ä–æ–≤–∞–Ω–æ: {auth_result.from_cache}")
```

## üìã –ü–õ–ê–ù –ú–ò–ì–†–ê–¶–ò–ò

### –≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (1-2 –¥–Ω—è)

#### 1.1 –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
```bash
framework/auth/
‚îú‚îÄ‚îÄ service.py           # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞—Å–∞–¥–Ω—ã–π —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îú‚îÄ‚îÄ api_provider.py  # API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (requests)
‚îÇ   ‚îú‚îÄ‚îÄ ui_provider.py   # UI –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Playwright)
‚îÇ   ‚îî‚îÄ‚îÄ cache_provider.py # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ validators/
‚îÇ   ‚îî‚îÄ‚îÄ cookie_validator.py # –í–∞–ª–∏–¥–∞—Ü–∏—è –∫—É–∫
‚îî‚îÄ‚îÄ types.py             # –û–±—â–∏–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
```

#### 1.2 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- **APIProvider**: –ú–∏–≥—Ä–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –∏–∑ `simple_api_auth.py` –∏ `api_auth.py`
- **UIProvider**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Playwright –¥–ª—è UI-—Ç–µ—Å—Ç–æ–≤ –∏–∑ `auth_operations.py`
- **CacheProvider**: –£–º–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL –∏–∑ `auth_manager.py`

#### 1.3 –°–æ–∑–¥–∞—Ç—å —Ñ–∞—Å–∞–¥–Ω—ã–π —Å–µ—Ä–≤–∏—Å
- –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2-3 –¥–Ω—è)

#### 2.1 –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã
```python
# –ë—ã–ª–æ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SmartAuthManager –≤ —Ç–µ—Å—Ç–∞—Ö):
from framework.utils.smart_auth_manager import SmartAuthManager

def test_example():
    manager = SmartAuthManager()
    cookie = manager.get_valid_session_cookie("admin")
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—É–∫–∏ –≤ —Ç–µ—Å—Ç–µ

# –°—Ç–∞–ª–æ (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞):
from framework.auth.service import AuthService

def test_example():
    auth = AuthService()
    cookie = auth.get_session_cookie("admin")
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—É–∫–∏ –≤ —Ç–µ—Å—Ç–µ

# –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ç–µ—Å—Ç–∞—Ö:
def test_multi_domain_example(fx_auth_manager):  # –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ–∏–∫—Å—Ç—É—Ä–∞
    # fx_auth_manager –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AuthService
    session_cookie = fx_auth_manager.get_valid_session_cookie(role="admin")
    # –¢–µ—Å—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ
```

#### 2.2 –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
```python
# framework/auth/legacy.py - –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
def get_session_cookie(role="admin"):
    """–õ–µ–≥–∞—Å–∏ —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏"""
    return AuthService().get_session_cookie(role)

# –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∏–∫—Å—Ç—É—Ä
def authenticated_admin(browser):
    """–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ñ–∏–∫—Å—Ç—É—Ä–æ–π"""
    context = browser.new_context()
    auth = AuthService()
    cookie = auth.get_session_cookie("admin")
    context.add_cookies(auth.get_auth_cookies("admin"))
    return context

def authenticated_user(browser):
    """–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ñ–∏–∫—Å—Ç—É—Ä–æ–π"""
    context = browser.new_context()
    auth = AuthService()
    cookie = auth.get_session_cookie("user")
    context.add_cookies(auth.get_auth_cookies("user"))
    return context
```

#### 2.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- API —Ç–µ—Å—Ç—ã (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ)
- UI —Ç–µ—Å—Ç—ã (smoke, e2e)
- –ú–∞—Å—Å–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –≠—Ç–∞–ø 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –æ—á–∏—Å—Ç–∫–∞ (1 –¥–µ–Ω—å)

#### 3.1 –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —É–∑–∫–∏—Ö –º–µ—Å—Ç
- –£–ª—É—á—à–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

#### 3.2 –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ –∫–æ–¥–∞
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –º–æ–¥—É–ª–µ–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 3.3 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ README
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –≥–∞–π–¥—ã

## üéØ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ò

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ**: –û–¥–∏–Ω –∏–º–ø–æ—Ä—Ç –≤–º–µ—Å—Ç–æ —á–µ—Ç—ã—Ä–µ—Ö
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –£–º–Ω—ã–π –≤—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **–°–∫–æ—Ä–æ—Å—Ç—å**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ + –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏:
- **–£–¥–æ–±—Å—Ç–≤–æ**: –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- **–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å**: –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã

### –î–ª—è –ø—Ä–æ–µ–∫—Ç–∞:
- **–°–Ω–∏–∂–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: -60% –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞
- **–£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –¥–æ–º–µ–Ω—ã/–º–µ—Ç–æ–¥—ã

## üîß –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –ö–û–ú–ü–û–ù–ï–ù–¢–û–í

### 1. APIAuthProvider
```python
class APIAuthProvider:
    """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ HTTP –∑–∞–ø—Ä–æ—Å—ã."""
    
    def authenticate_user(self, username: str, password: str) -> AuthResult:
        """–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API."""
    
    def authenticate_users_batch(self, users: List[Dict], threads: int = 5) -> BatchAuthResult:
        """–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –º–∞—Å—Å–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è."""
```

### 2. UIAuthProvider
```python
class UIAuthProvider:
    """–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è UI –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä."""
    
    def authenticate_via_browser(self, username: str, password: str, 
                               browser_context: BrowserContext) -> AuthResult:
        """–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫—É–∫."""
```

### 3. AuthCache
```python
class AuthCache:
    """–°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö."""
    
    def get_cached_cookie(self, role: str) -> Optional[str]:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –∫—É–∫–∏ –∏–∑ –∫—ç—à–∞."""
    
    def set_cached_cookie(self, role: str, cookie: str, ttl: int = 300):
        """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫—É–∫–∏ –≤ –∫—ç—à —Å TTL."""
```

### 4. CookieValidator
```python
class CookieValidator:
    """–í–∞–ª–∏–¥–∞—Ç–æ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∫—É–∫."""
    
    def validate_cookie(self, cookie: str) -> bool:
        """–ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—É–∫–∏."""
    
    def validate_session_online(self, cookie: str) -> bool:
        """–û–Ω–ª–∞–π–Ω –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ API."""
```

## üìä –ú–ï–¢–†–ò–ö–ò –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì

### 1. –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –í—Ä–µ–º—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É–∫–∏
- –í—Ä–µ–º—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –í—Ä–µ–º—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### 2. –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- DEBUG: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- INFO: –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (—É—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
- WARNING: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–∫—É–∫–∞ —É—Å—Ç–∞—Ä–µ–ª–∞)
- ERROR: –û—à–∏–±–∫–∏ (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å)

### 3. –û—Ç—á–µ—Ç—ã
- –£—Ä–æ–≤–µ–Ω—å —É—Å–ø–µ—Ö–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞
- –ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤

## üöÄ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

### 1. –î–ª—è –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤
```python
from framework.auth.service import AuthService

def test_new_feature():
    auth = AuthService()
    cookie = auth.get_session_cookie("admin")
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ cookie –≤ —Ç–µ—Å—Ç–µ
```

### 2. –î–ª—è –º–∞—Å—Å–æ–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```python
from framework.auth.service import AuthService

def setup_test_users():
    auth = AuthService()
    users = [{"login": "user1", "password": "pass1"}, ...]
    result = auth.mass_authenticate(users)
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

### 3. –î–ª—è –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```python
from framework.auth.service import AuthService

def test_cross_domain_auth():
    auth = AuthService()
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
    cookies = auth.get_auth_cookies("admin", domain=".bll.by")

def test_multi_domain_auth():
    auth = AuthService()
    # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
    domains = [".bll.by", ".expert.bll.by", ".bonus.bll.by", ".ca.bll.by", ".cp.bll.by"]
    for domain in domains:
        cookies = auth.get_auth_cookies("admin", domain=domain)
        # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—É–∫ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
```

## üîç –°–†–ê–í–ù–ï–ù–ò–ï –° –¢–ï–ö–£–©–ò–ú –ü–û–î–•–û–î–û–ú

| –ê—Å–ø–µ–∫—Ç | –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ | –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ |
|--------|----------------|--------------|
| –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ | 4 —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ | 1 —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è |
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ | –í—ã—Å–æ–∫–æ–µ | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ |
| –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –†–∞–∑–Ω—ã–µ | –ï–¥–∏–Ω—ã–π |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ | –°–ª–æ–∂–Ω–∞—è | –ü—Ä–æ—Å—Ç–∞—è |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –°—Ä–µ–¥–Ω—è—è | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è |
| –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è | –ü–æ–ª–Ω–∞—è |

## üìå –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ conftest.py —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –ø–æ–∑–≤–æ–ª–∏—Ç:
1. –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–∞ —Å—á–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
3. –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (API, UI, –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω–∞—è)
4. –û–±–µ—Å–ø–µ—á–∏—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤–æ –≤—Å–µ—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
5. –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫—É —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
6. –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ —Ç–∏–ø—ã —Ñ–∏–∫—Å—Ç—É—Ä –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
7. –û–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å allow-session –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏ –æ–±—Ö–æ–¥–æ–º –∑–∞—â–∏—Ç—ã –æ—Ç –±–æ—Ç–æ–≤
8. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —É–º–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –∫—É–∫–∏ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
9. –û–±–µ—Å–ø–µ—á–∏—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ conftest.py –¥–ª—è –≤—Å–µ—Ö –≥—Ä—É–ø–ø —Ç–µ—Å—Ç–æ–≤
10. –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–º —É—Ä–æ–≤–Ω–µ

–ü–æ–¥—Ö–æ–¥ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ conftest.py –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö:
- **–ì–ª–æ–±–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å** (–∫–æ—Ä–Ω–µ–≤–æ–π conftest.py) - –±–∞–∑–æ–≤—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **–ì—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–æ–≤** (tests/*/conftest.py) - —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
- **–ü–æ–¥–≥—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–æ–≤** (tests/*/*/conftest.py) - —É—Ç–æ—á–Ω–µ–Ω–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã

–ú–∏–≥—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, —á—Ç–æ–±—ã –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∏—Å–∫–∏ –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤. –ü–æ–¥—Ö–æ–¥ —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç —Ç–µ–∫—É—â–µ–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∫ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ conftest.py.