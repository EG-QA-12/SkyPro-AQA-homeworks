# Обзор тестовой структуры

Этот документ даёт быстрый, но исчерпывающий обзор организации автотестов в проекте **BLL Tests**.

## Слои тестов

| Слой | Назначение | Директория |
|------|-----------|-----------|
| Unit | Проверка отдельных функций и классов без зависимостей | `tests/unit/` |
| Integration | Проверка взаимодействия компонентов приложения (БД, API) | `tests/integration/` |
| E2E (end-to-end) | Полные пользовательские сценарии через UI или API | `tests/e2e/` |
| Visual | Визуальные сравнения страниц и компонентов | `tests/visual/` |

### Авторизационные тесты

Специализированный набор сценариев для проверки входа в систему и управления сессиями располагается в `tests/auth/`.

> Подробности о работе с cookies и сценариях авторизации смотрите в `docs/page_objects.md` и `docs/fixtures_reference.md`.

## Как выбрать нужные тесты

| Задача | Команда |
|--------|---------|
| Быстрый smoke-прогон | `pytest -m smoke -v` |
| Проверка конкретного файла | `pytest tests/e2e/test_dashboard.py -v` |
| Запуск всех визуальных тестов | `pytest tests/visual/ -v` |
| Параллельное выполнение (4 ядра) | `pytest -n 4 -v` |

## Шаблон добавления нового теста

1. Определите слой: unit / integration / e2e / visual.
2. Создайте файл `test_<feature>.py` в нужной директории.
3. Импортируйте общие фикстуры из `framework/fixtures/` или `tests/**/conftest.py`.
4. Пишите тест, придерживаясь принципа «один тест — одна проверка».
5. Запустите `pytest -k <feature> -v` и убедитесь, что тест проходит.
6. Добавьте маркер (`@pytest.mark.smoke`, `@pytest.mark.auth` и т.д.), если нужно.

## Где искать примеры

- **E2E:** `tests/e2e/user_journeys/test_main_page_access.py`
- **Integration:** `tests/integration/infrastructure/test_redirects.py`
- **Unit:** `tests/unit/test_auth_quick.py`

Если вы новичок в проекте, сначала посмотрите примеры похожих тестов, чтобы сохранить единый стиль кода и структурировать проверки одинаково. 