# Документация по новым тестам

## Обзор

В рамках задачи по анализу и улучшению тестов бургер-меню и главной страницы были созданы следующие тесты:

1. **Обновленный тест бургер-меню** - `tests/integration/test_burger_menu_links_playwright.py`
2. **Расширенный тест навигации бургер-меню** - `tests/integration/test_burger_menu_navigation.py`  
3. **Тест ссылок главной страницы** - `tests/integration/test_main_page_links.py`

## 1. Обновленный тест бургер-меню

### Файл: `tests/integration/test_burger_menu_links_playwright.py`

### Изменения:
- **Обновлен CSV файл** с 23 до 83 ссылок
- **Добавлена поддержка телефонных ссылок** (tel:)
- **Улучшена логика проверки переходов** для внешних ссылок
- **Оптимизированы селекторы** для поиска элементов

### Особенности:
- Проверяет все 83 ссылки бургер-меню
- Для телефонных ссылок проверяет только видимость
- Для внутренних ссылок проверяет заголовок страницы
- Для внешних ссылок проверяет изменение URL

## 2. Расширенный тест навигации бургер-меню

### Файл: `tests/integration/test_burger_menu_navigation.py`

### Особенности:
- **Полная изоляция тестов** через `function` scope фикстуры
- **Параметризация** для всех 83 ссылок
- **Комплексные проверки** структуры меню
- **Поддержка различных типов ссылок**

### Тесты:
1. `test_burger_menu_opens` - проверяет открытие меню
2. `test_burger_menu_link_navigation` - параметризованный тест для всех ссылок
3. `test_burger_menu_structure` - проверяет структуру меню

### Преимущества:
- Каждый тест изолирован
- Подробная отчетность при ошибках
- Поддержка телефонных ссылок
- Гибкая стратегия поиска элементов

## 3. Тест ссылок главной страницы

### Файл: `tests/integration/test_main_page_links.py`

### Особенности:
- **Тестирование в авторизованном режиме**
- **Проверка основных разделов** главной страницы
- **Изоляция каждого теста** через function scope
- **Комплексные проверки** навигации

### Тесты:
1. `test_main_page_loads` - проверяет загрузку главной страницы
2. `test_header_navigation_links` - ссылки в хедере
3. `test_main_content_sections` - основные разделы контента
4. `test_community_section_links` - ссылки раздела Сообщество
5. `test_footer_links` - ссылки в футере
6. `test_search_functionality` - функциональность поиска
7. `test_reference_info_section` - раздел справочной информации

## Запуск тестов

### Запуск всех тестов бургер-меню:
```bash
python -m pytest tests/integration/test_burger_menu_links_playwright.py -v
python -m pytest tests/integration/test_burger_menu_navigation.py -v
```

### Запуск тестов главной страницы:
```bash
python -m pytest tests/integration/test_main_page_links.py -v
```

### Запуск в GUI режиме:
```bash
TEST_HEADLESS=false python -m pytest tests/integration/test_burger_menu_navigation.py::test_burger_menu_link_navigation -v
```

## Структура данных

### CSV файл: `tests/data/burger_menu_links.csv`
- Содержит 83 ссылки бургер-меню
- Формат: `link_text,href`
- Включает внутренние, внешние и телефонные ссылки

## Рекомендации по использованию

### Для CI/CD:
- Используйте headless режим для быстрого выполнения
- Запускайте тесты параллельно с помощью pytest-xdist
- Интегрируйте с Allure для детальной отчетности

### Для локальной разработки:
- Используйте GUI режим для отладки
- Запускайте отдельные тесты для быстрой проверки
- Проверяйте логи при ошибках

### Мониторинг:
- Регулярно обновляйте CSV файл при изменениях меню
- Следите за изменениями структуры страниц
- Проверяйте доступность внешних ссылок

## Принципы тестирования

1. **Изоляция** - каждый тест независим
2. **Авторизация** - все тесты выполняются в авторизованном режиме
3. **Антибот защита** - используется параметр `allow-session=2`
4. **Стабильные локаторы** - приоритет data-testid и текстовым селекторам
5. **Комплексная проверка** - не только переход, но и содержимое страницы
