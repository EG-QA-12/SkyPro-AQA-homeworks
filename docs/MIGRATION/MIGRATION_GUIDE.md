# üîÑ –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –ú–ò–ì–†–ê–¶–ò–ò

## üìã –û–ë–ó–û–†

–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –Ω–∞ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤.

## üéØ –¶–ï–õ–ò –ú–ò–ì–†–ê–¶–ò–ò

### 1. –£–ø—Ä–æ—â–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **–ë—ã–ª–æ**: 4 —Ä–∞–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–æ–¥
- **–°—Ç–∞–ª–æ**: –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### 2. –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- **–ë—ã–ª–æ**: –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ç–µ—Å—Ç—ã, —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **–°—Ç–∞–ª–æ**: –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

### 3. –ü–æ–≤—ã—à–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- **–ë—ã–ª–æ**: –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É–∫–∞–º–∏, —Å–ª–æ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–°—Ç–∞–ª–æ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

## üöÄ –ü–û–®–ê–ì–û–í–ê–Ø –ú–ò–ì–†–ê–¶–ò–Ø

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

#### 1.1. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
git add .
git commit -m "–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π"
git tag backup/pre-migration
```

#### 1.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```python
# scripts/maintenance/check_current_state.py
import os
from framework.utils.auth_utils import get_session_cookie as old_get_cookie
from framework.utils.auth_cookie_provider import AuthCookieProvider

def check_current_state():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏."""
    
    print("üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è...")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã
    roles = ["admin", "moderator", "user"]
    
    for role in roles:
        print(f"\n–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏: {role}")
        
        # –°—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥
        old_cookie = old_get_cookie(role)
        print(f"  –°—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥: {'‚úÖ' if old_cookie else '‚ùå'}")
        
        # –ü—Ä–æ–≤–∞–π–¥–µ—Ä –∫—É–∫
        provider = AuthCookieProvider()
        provider_cookie = provider.get_auth_cookie(role)
        print(f"  –ü—Ä–æ–≤–∞–π–¥–µ—Ä: {'‚úÖ' if provider_cookie else '‚ùå'}")
    
    print("\n‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")

if __name__ == "__main__":
    check_current_state()
```

#### 1.3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
echo "SESSION_COOKIE_ADMIN=–≤–∞—à–∞_–∞–¥–º–∏–Ω—Å–∫–∞—è_–∫—É–∫–∞" >> .env
echo "SESSION_COOKIE_MODERATOR=–≤–∞—à–∞_–∫—É–∫–∞_–º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞" >> .env
echo "SESSION_COOKIE_USER=–≤–∞—à–∞_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è_–∫—É–∫–∞" >> .env
```

### –≠—Ç–∞–ø 2: –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

#### 2.1. –ú–∏–≥—Ä–∞—Ü–∏—è API —Ç–µ—Å—Ç–æ–≤

**–ë—ã–ª–æ (—Å—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥):**
```python
# tests/integration/test_old_api.py
import pytest
import requests
from framework.utils.auth_utils import get_session_cookie

def test_old_question_creation():
    """–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –≤–æ–ø—Ä–æ—Å–∞."""
    
    # –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Å—Å–∏–∏
    session_cookie = get_session_cookie("admin")
    session = requests.Session()
    session.cookies.set("test_joint_session", session_cookie)
    
    # –†—É—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ CSRF
    csrf_token = get_csrf_token()  # –û—Ç–¥–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
    
    # –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
    response = session.post(
        "https://expert.bll.by/questions",
        data={"p": "–¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å"},
        headers={"X-CSRF-TOKEN": csrf_token}
    )
    
    assert response.status_code == 200
```

**–°—Ç–∞–ª–æ (–Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥):**
```python
# tests/integration/test_new_api.py
import pytest
from framework.test_bases.api_test_base import APITestBase

class TestQuestionCreation(APITestBase):
    """–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –≤–æ–ø—Ä–æ—Å–∞."""
    
    @pytest.mark.api
    @pytest.mark.question
    def test_new_question_creation(self):
        """–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –≤–æ–ø—Ä–æ—Å–∞."""
        
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
        # self.admin_client —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
        
        # –ü—Ä–æ—Å—Ç–æ–π –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞
        result = self.admin_client.create_test_question("–¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å")
        
        # –ú–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç bool, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–Ω—É—Ç—Ä–∏
        assert result is True
```

#### 2.2. –ú–∏–≥—Ä–∞—Ü–∏—è UI —Ç–µ—Å—Ç–æ–≤

**–ë—ã–ª–æ (—Å—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥):**
```python
# tests/integration/test_old_ui.py
import pytest
from playwright.sync_api import sync_playwright
from framework.utils.auth_cookie_provider import get_auth_cookies

@pytest.fixture(scope="session")
def browser():
    """–°—Ç–∞—Ä—ã–π –±—Ä–∞—É–∑–µ—Ä —Ñ–∏–∫—Å—Ç—É—Ä–∞."""
    with sync_playwright() as p:
        browser = p.chromium.launch(headless=True)
        yield browser
        browser.close()

@pytest.fixture
def page(browser):
    """–°—Ç–∞—Ä–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ñ–∏–∫—Å—Ç—É—Ä–∞."""
    context = browser.new_context()
    # –†—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫—É–∫
    context.add_cookies(get_auth_cookies(role="admin"))
    page = context.new_page()
    yield page
    page.close()
    context.close()

def test_old_burger_menu(page):
    """–°—Ç–∞—Ä—ã–π —Ç–µ—Å—Ç –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é."""
    
    # –†—É—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
    page.goto("https://bll.by/")
    
    # –†—É—á–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é
    burger_button = page.locator("a.menu-btn.menu-btn_new")
    burger_button.wait_for(state="visible")
    burger_button.click()
    
    # –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Å—ã–ª–æ–∫
    links = page.locator("a.menu_item_link").all()
    assert len(links) > 0
```

**–°—Ç–∞–ª–æ (–Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥):**
```python
# tests/integration/test_new_ui.py
import pytest
from framework.test_bases.ui_test_base import UITestBase

class TestBurgerMenu(UITestBase):
    """–ù–æ–≤—ã–π —Ç–µ—Å—Ç –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é."""
    
    @pytest.mark.ui
    @pytest.mark.burger_menu
    def test_new_burger_menu(self, page):
        """–ù–æ–≤—ã–π —Ç–µ—Å—Ç –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é."""
        
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
        # page —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∞
        
        # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
        self.open_burger_menu(page)
        links = self.get_burger_menu_links(page)
        
        assert len(links) > 0
        
        # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–¥–æ–±–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
        for link in links[:3]:
            self.click_burger_menu_link(page, link)
            assert self.verify_page_loaded(page)
```

### –≠—Ç–∞–ø 3: –ú–∏–≥—Ä–∞—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

#### 3.1. –ó–∞–º–µ–Ω–∞ –∏–º–ø–æ—Ä—Ç–æ–≤

**–ü–æ–∏—Å–∫ –∏ –∑–∞–º–µ–Ω–∞:**
```bash
# –ù–∞–π—Ç–∏ –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –∏–º–ø–æ—Ä—Ç—ã
grep -r "from framework.utils.auth_" . --include="*.py"

# –ó–∞–º–µ–Ω–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã
find . -name "*.py" -exec sed -i 's/from framework.utils.auth_utils import get_session_cookie/from framework.auth import get_session_cookie/g' {} +
find . -name "*.py" -exec sed -i 's/from framework.utils.auth_cookie_provider import AuthCookieProvider/from framework.auth import AuthManager/g' {} +
```

#### 3.2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤

**–ë—ã–ª–æ:**
```python
from framework.utils.auth_utils import get_session_cookie
from framework.utils.auth_cookie_provider import AuthCookieProvider

# –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±
cookie = get_session_cookie("admin")

# –°—Ç–∞—Ä—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
provider = AuthCookieProvider()
cookie = provider.get_auth_cookie("admin")
```

**–°—Ç–∞–ª–æ:**
```python
from framework.auth import get_session_cookie, AuthManager

# –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
cookie = get_session_cookie("admin")

# –ù–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
manager = AuthManager()
cookie = manager.get_session_cookie("admin")
```

### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

#### 4.1. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
python -m pytest tests/integration/test_new_api.py -v
python -m pytest tests/integration/test_new_ui.py -v

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
python -m pytest tests/integration/ -n 4 -v --tb=short
```

#### 4.2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```python
# scripts/compare_migration_results.py
import subprocess
import json

def run_tests_and_compare():
    """–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–æ –∏ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏."""
    
    print("üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–∏...")
    
    # –ó–∞–ø—É—Å–∫ —Å—Ç–∞—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)
    old_result = subprocess.run([
        "python", "-m", "pytest", 
        "tests/integration/test_old_*", 
        "--json-report", "--json-report-file=old_report.json"
    ], capture_output=True, text=True)
    
    # –ó–∞–ø—É—Å–∫ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤
    new_result = subprocess.run([
        "python", "-m", "pytest", 
        "tests/integration/test_new_*", 
        "--json-report", "--json-report-file=new_report.json"
    ], capture_output=True, text=True)
    
    # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    compare_reports("old_report.json", "new_report.json")

def compare_reports(old_file, new_file):
    """–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤."""
    
    with open(old_file) as f:
        old_data = json.load(f)
    
    with open(new_file) as f:
        new_data = json.load(f)
    
    print("üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:")
    print(f"  –°—Ç–∞—Ä—ã–µ —Ç–µ—Å—Ç—ã: {old_data.get('summary', {}).get('passed', 0)} –ø—Ä–æ—à–ª–∏")
    print(f"  –ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã: {new_data.get('summary', {}).get('passed', 0)} –ø—Ä–æ—à–ª–∏")
    
    # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    old_duration = old_data.get('duration', 0)
    new_duration = new_data.get('duration', 0)
    
    print(f"  –°—Ç–∞—Ä–æ–µ –≤—Ä–µ–º—è: {old_duration:.2f} —Å–µ–∫")
    print(f"  –ù–æ–≤–æ–µ –≤—Ä–µ–º—è: {new_duration:.2f} —Å–µ–∫")
    print(f"  –†–∞–∑–Ω–∏—Ü–∞: {old_duration - new_duration:.2f} —Å–µ–∫ ({((old_duration - new_duration) / old_duration * 100):.1f}% –±—ã—Å—Ç—Ä–µ–µ)")

if __name__ == "__main__":
    run_tests_and_compare()
```

## üìã –ü–û–î–†–û–ë–ù–´–ï –ü–†–ò–ú–ï–†–´ –ú–ò–ì–†–ê–¶–ò–ò

### –ü—Ä–∏–º–µ—Ä 1: –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–ë—ã–ª–æ:**
```python
# tests/auth/test_old_auth.py
import pytest
import requests
from framework.utils.auth_utils import get_session_cookie

def test_admin_access():
    """–¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞."""
    
    # –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Å—Å–∏–∏
    cookie = get_session_cookie("admin")
    if not cookie:
        pytest.fail("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∫—É–∫—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞")
    
    session = requests.Session()
    session.cookies.set("test_joint_session", cookie)
    
    # –†—É—á–Ω–æ–π –∑–∞–ø—Ä–æ—Å
    response = session.get("https://expert.bll.by/admin/posts")
    
    assert response.status_code == 200
    assert "–ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏" in response.text
```

**–°—Ç–∞–ª–æ:**
```python
# tests/auth/test_new_auth.py
import pytest
from framework.test_bases.api_test_base import APITestBase

class TestAdminAccess(APITestBase):
    """–¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞."""
    
    @pytest.mark.auth
    @pytest.mark.admin
    def test_admin_access(self):
        """–¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞."""
        
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
        # self.admin_client —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
        
        # –ü—Ä–æ—Å—Ç–æ–π –≤—ã–∑–æ–≤
        response = self.admin_client.get_moderation_panel()
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∏
        assert response.status_code == 200
        assert response.json().get("success") is True
```

### –ü—Ä–∏–º–µ—Ä 2: –ú–∏–≥—Ä–∞—Ü–∏—è UI —Ç–µ—Å—Ç–∞

**–ë—ã–ª–æ:**
```python
# tests/ui/test_old_burger.py
import pytest
from playwright.sync_api import sync_playwright
from framework.utils.auth_cookie_provider import get_auth_cookies

def test_burger_menu_links():
    """–¢–µ—Å—Ç —Å—Å—ã–ª–æ–∫ –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é."""
    
    with sync_playwright() as p:
        browser = p.chromium.launch(headless=True)
        context = browser.new_context()
        
        # –†—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫—É–∫
        context.add_cookies(get_auth_cookies("admin"))
        page = context.new_page()
        
        # –†—É—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
        page.goto("https://bll.by/")
        page.locator("a.menu-btn.menu-btn_new").click()
        
        # –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
        links = page.locator("a.menu_item_link").all()
        assert len(links) > 0
        
        browser.close()
```

**–°—Ç–∞–ª–æ:**
```python
# tests/ui/test_new_burger.py
import pytest
from framework.test_bases.ui_test_base import UITestBase

class TestBurgerMenuLinks(UITestBase):
    """–¢–µ—Å—Ç —Å—Å—ã–ª–æ–∫ –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é."""
    
    @pytest.mark.ui
    @pytest.mark.burger_menu
    def test_burger_menu_links(self, page):
        """–¢–µ—Å—Ç —Å—Å—ã–ª–æ–∫ –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é."""
        
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
        # page —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∞
        
        # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
        self.open_burger_menu(page)
        links = self.get_burger_menu_links(page)
        
        assert len(links) > 0
```

## üõ†Ô∏è –ò–ù–°–¢–†–£–ú–ï–ù–¢–´ –ú–ò–ì–†–ê–¶–ò–ò

### 1. –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
```python
# scripts/migration/auto_migrate.py
#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤.
"""

import os
import re
from pathlib import Path

class AutoMigrator:
    """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∏–≥—Ä–∞—Ç–æ—Ä."""
    
    def __init__(self):
        self.import_patterns = {
            r'from framework\.utils\.auth_utils import get_session_cookie': 'from framework.auth import get_session_cookie',
            r'from framework\.utils\.auth_cookie_provider import AuthCookieProvider': 'from framework.auth import AuthManager',
            r'from framework\.utils\.smart_auth_manager import SmartAuthManager': 'from framework.auth import AuthManager',
        }
        
        self.usage_patterns = {
            r'get_session_cookie\(': 'get_session_cookie(',
            r'AuthCookieProvider\(\)': 'AuthManager()',
            r'SmartAuthManager\(\)': 'AuthManager()',
        }
    
    def migrate_file(self, file_path: Path) -> bool:
        """–ú–∏–≥—Ä–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞."""
        
        try:
            with open(file_path, 'r', encoding='utf-8') as f:
                content = f.read()
            
            original_content = content
            
            # –ó–∞–º–µ–Ω—è–µ–º –∏–º–ø–æ—Ä—Ç—ã
            for old_import, new_import in self.import_patterns.items():
                content = re.sub(old_import, new_import, content)
            
            # –ó–∞–º–µ–Ω—è–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
            for old_usage, new_usage in self.usage_patterns.items():
                content = re.sub(old_usage, new_usage, content)
            
            # –ï—Å–ª–∏ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Å–æ—Ö—Ä–∞–Ω—è–µ–º
            if content != original_content:
                with open(file_path, 'w', encoding='utf-8') as f:
                    f.write(content)
                return True
            
            return False
            
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞ {file_path}: {e}")
            return False
    
    def migrate_directory(self, directory: Path) -> int:
        """–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏."""
        
        migrated_count = 0
        
        for py_file in directory.rglob("*.py"):
            if self.migrate_file(py_file):
                print(f"‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω —Ñ–∞–π–ª: {py_file}")
                migrated_count += 1
        
        return migrated_count

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è."""
    
    migrator = AutoMigrator()
    
    # –ú–∏–≥—Ä–∏—Ä—É–µ–º —Ç–µ—Å—Ç—ã
    tests_dir = Path("tests")
    if tests_dir.exists():
        count = migrator.migrate_directory(tests_dir)
        print(f"‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ {count} —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ tests/")
    
    # –ú–∏–≥—Ä–∏—Ä—É–µ–º —Å–∫—Ä–∏–ø—Ç—ã
    scripts_dir = Path("scripts")
    if scripts_dir.exists():
        count = migrator.migrate_directory(scripts_dir)
        print(f"‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ {count} —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ scripts/")

if __name__ == "__main__":
    main()
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
python scripts/migration/auto_migrate.py
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
```python
# scripts/migration/compatibility_check.py
#!/usr/bin/env python3
"""
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏.
"""

import subprocess
import sys

def check_compatibility():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏."""
    
    print("üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏...")
    
    # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
    result = subprocess.run([
        "python", "-m", "pytest",
        "tests/",
        "-v",
        "--tb=short",
        "-x"  # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
    ], capture_output=True, text=True)
    
    if result.returncode == 0:
        print("‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ!")
        print(f"–í—ã–≤–æ–¥: {result.stdout[-500:] if result.stdout else '–ü—É—Å—Ç–æ'}")
        return True
    else:
        print("‚ùå –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—à–ª–∏:")
        print(f"–ö–æ–¥ –æ—à–∏–±–∫–∏: {result.returncode}")
        print(f"Stderr: {result.stderr[-500:] if result.stderr else '–ü—É—Å—Ç–æ'}")
        return False

def check_imports():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤."""
    
    print("üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤...")
    
    result = subprocess.run([
        "python", "-c", "import framework.auth; print('‚úÖ –ò–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç')"
    ], capture_output=True, text=True)
    
    if result.returncode == 0:
        print("‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
        return True
    else:
        print("‚ùå –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–æ–≤:")
        print(result.stderr)
        return False

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è."""
    
    success = True
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–º–ø–æ—Ä—Ç—ã
    if not check_imports():
        success = False
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ—Å—Ç—ã
    if not check_compatibility():
        success = False
    
    if success:
        print("\nüéâ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!")
        return 0
    else:
        print("\n‚ùå –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Å –æ—à–∏–±–∫–∞–º–∏!")
        return 1

if __name__ == "__main__":
    sys.exit(main())
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
python scripts/migration/compatibility_check.py
```

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ú–ò–ì–†–ê–¶–ò–ò

### 1. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
```python
# scripts/migration/progress_tracker.py
#!/usr/bin/env python3
"""
–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –º–∏–≥—Ä–∞—Ü–∏–∏.
"""

import json
from pathlib import Path

class MigrationProgress:
    """–ü—Ä–æ–≥—Ä–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏."""
    
    def __init__(self, progress_file: str = "migration_progress.json"):
        self.progress_file = Path(progress_file)
        self.progress = self.load_progress()
    
    def load_progress(self) -> dict:
        """–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞."""
        if self.progress_file.exists():
            with open(self.progress_file) as f:
                return json.load(f)
        return {
            "total_files": 0,
            "migrated_files": 0,
            "failed_files": 0,
            "remaining_files": [],
            "completed_steps": []
        }
    
    def save_progress(self):
        """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞."""
        with open(self.progress_file, "w") as f:
            json.dump(self.progress, f, indent=2)
    
    def add_completed_step(self, step: str):
        """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ —à–∞–≥–∞."""
        if step not in self.progress["completed_steps"]:
            self.progress["completed_steps"].append(step)
            self.save_progress()
    
    def update_file_stats(self, total: int, migrated: int, failed: int, remaining: list):
        """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ñ–∞–π–ª–æ–≤."""
        self.progress["total_files"] = total
        self.progress["migrated_files"] = migrated
        self.progress["failed_files"] = failed
        self.progress["remaining_files"] = remaining
        self.save_progress()
    
    def print_report(self):
        """–í—ã–≤–æ–¥ –æ—Ç—á–µ—Ç–∞."""
        print("üìä –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏:")
        print("=" * 40)
        
        for step in self.progress["completed_steps"]:
            print(f"‚úÖ {step}")
        
        print(f"\nüìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∞–π–ª–æ–≤:")
        print(f"   –í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤: {self.progress['total_files']}")
        print(f"   –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ: {self.progress['migrated_files']}")
        print(f"   –û—à–∏–±–∫–∏: {self.progress['failed_files']}")
        print(f"   –û—Å—Ç–∞–ª–æ—Å—å: {len(self.progress['remaining_files'])}")
        
        if self.progress["remaining_files"]:
            print(f"\nüìù –û—Å—Ç–∞–≤—à–∏–µ—Å—è —Ñ–∞–π–ª—ã:")
            for file in self.progress["remaining_files"][:10]:
                print(f"   - {file}")
            if len(self.progress["remaining_files"]) > 10:
                print(f"   ... –∏ –µ—â–µ {len(self.progress['remaining_files']) - 10} —Ñ–∞–π–ª–æ–≤")

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è."""
    progress = MigrationProgress()
    progress.print_report()

if __name__ == "__main__":
    main()
```

### 2. –û—Ç—á–µ—Ç –æ –º–∏–≥—Ä–∞—Ü–∏–∏
```python
# scripts/migration/migration_report.py
#!/usr/bin/env python3
"""
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –º–∏–≥—Ä–∞—Ü–∏–∏.
"""

import json
from datetime import datetime
from pathlib import Path

class MigrationReport:
    """–û—Ç—á–µ—Ç –æ –º–∏–≥—Ä–∞—Ü–∏–∏."""
    
    def __init__(self):
        self.report = {
            "generated_at": datetime.now().isoformat(),
            "migration_summary": {},
            "file_changes": [],
            "performance_improvements": {},
            "issues_found": [],
            "recommendations": []
        }
    
    def add_summary(self, total_files: int, migrated_files: int, failed_files: int):
        """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–¥–∫–∏."""
        self.report["migration_summary"] = {
            "total_files": total_files,
            "migrated_files": migrated_files,
            "failed_files": failed_files,
            "success_rate": (migrated_files / total_files * 100) if total_files > 0 else 0,
            "completion_date": datetime.now().isoformat()
        }
    
    def add_file_change(self, old_file: str, new_file: str, status: str, notes: str = ""):
        """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞."""
        self.report["file_changes"].append({
            "old_file": old_file,
            "new_file": new_file,
            "status": status,  # migrated, failed, skipped
            "notes": notes,
            "changed_at": datetime.now().isoformat()
        })
    
    def add_performance_improvement(self, metric: str, old_value: float, new_value: float):
        """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏."""
        improvement = ((old_value - new_value) / old_value * 100) if old_value > 0 else 0
        
        self.report["performance_improvements"][metric] = {
            "old_value": old_value,
            "new_value": new_value,
            "improvement_percent": improvement,
            "measured_at": datetime.now().isoformat()
        }
    
    def add_issue(self, issue_type: str, description: str, severity: str):
        """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã."""
        self.report["issues_found"].append({
            "type": issue_type,
            "description": description,
            "severity": severity,  # critical, high, medium, low
            "reported_at": datetime.now().isoformat()
        })
    
    def add_recommendation(self, recommendation: str, priority: str):
        """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏."""
        self.report["recommendations"].append({
            "recommendation": recommendation,
            "priority": priority,  # high, medium, low
            "added_at": datetime.now().isoformat()
        })
    
    def generate_html_report(self, output_file: str = "migration_report.html"):
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –æ—Ç—á–µ—Ç–∞."""
        
        html_content = f"""
<!DOCTYPE html>
<html>
<head>
    <title>–û—Ç—á–µ—Ç –æ –º–∏–≥—Ä–∞—Ü–∏–∏</title>
    <meta charset="utf-8">
    <style>
        body {{ font-family: Arial, sans-serif; margin: 20px; }}
        .header {{ background-color: #f0f0f0; padding: 20px; border-radius: 5px; }}
        .section {{ margin: 20px 0; }}
        .success {{ color: green; }}
        .warning {{ color: orange; }}
        .error {{ color: red; }}
        table {{ border-collapse: collapse; width: 100%; }}
        th, td {{ border: 1px solid #ddd; padding: 8px; text-align: left; }}
        th {{ background-color: #f2f2f2; }}
    </style>
</head>
<body>
    <div class="header">
        <h1>üìä –û—Ç—á–µ—Ç –æ –º–∏–≥—Ä–∞—Ü–∏–∏</h1>
        <p>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω: {self.report['generated_at']}</p>
    </div>
    
    <div class="section">
        <h2>üìã –°–≤–æ–¥–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏</h2>
        <p><strong>–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤:</strong> {self.report['migration_summary'].get('total_files', 0)}</p>
        <p class="success"><strong>–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ:</strong> {self.report['migration_summary'].get('migrated_files', 0)}</p>
        <p class="error"><strong>–û—à–∏–±–∫–∏:</strong> {self.report['migration_summary'].get('failed_files', 0)}</p>
        <p><strong>–ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞:</strong> {self.report['migration_summary'].get('success_rate', 0):.1f}%</p>
    </div>
    
    <div class="section">
        <h2>üìà –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h2>
        <ul>
        """
        
        for metric, data in self.report["performance_improvements"].items():
            html_content += f"""
            <li><strong>{metric}:</strong> {data['old_value']} ‚Üí {data['new_value']} ({data['improvement_percent']:.1f}% —É–ª—É—á—à–µ–Ω–∏–µ)</li>
            """
        
        html_content += """
        </ul>
    </div>
    
    <div class="section">
        <h2>üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
        <ul>
        """
        
        for rec in self.report["recommendations"]:
            priority_class = "error" if rec["priority"] == "high" else "warning" if rec["priority"] == "medium" else "success"
            html_content += f"""
            <li class="{priority_class}"><strong>[{rec['priority'].upper()}]</strong> {rec['recommendation']}</li>
            """
        
        html_content += """
        </ul>
    </div>
</body>
</html>
        """
        
        with open(output_file, "w", encoding="utf-8") as f:
            f.write(html_content)
        
        print(f"‚úÖ HTML –æ—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ {output_file}")
    
    def save_json_report(self, output_file: str = "migration_report.json"):
        """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ JSON –æ—Ç—á–µ—Ç–∞."""
        with open(output_file, "w", encoding="utf-8") as f:
            json.dump(self.report, f, indent=2, ensure_ascii=False)
        print(f"‚úÖ JSON –æ—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ {output_file}")

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è."""
    
    report = MigrationReport()
    
    # –ü—Ä–∏–º–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç—á–µ—Ç–∞
    report.add_summary(total_files=50, migrated_files=45, failed_files=5)
    
    report.add_performance_improvement("–≤—Ä–µ–º—è_–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è", 45.0, 25.0)
    report.add_performance_improvement("–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–∑–∞–ø—Ä–æ—Å–æ–≤", 150, 80)
    
    report.add_recommendation("–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è 5 —Ñ–∞–π–ª–æ–≤", "high")
    report.add_recommendation("–û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é", "medium")
    
    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
    report.save_json_report()
    report.generate_html_report()

if __name__ == "__main__":
    main()
```

## üéØ –õ–£–ß–®–ò–ï –ü–†–ê–ö–¢–ò–ö–ò –ú–ò–ì–†–ê–¶–ò–ò

### 1. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
```python
# –ù–µ –º–∏–≥—Ä–∏—Ä—É–π—Ç–µ –≤—Å—ë —Å—Ä–∞–∑—É!
# ‚úÖ –•–æ—Ä–æ—à–æ - –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
class TestGradualMigration(APITestBase):
    def test_new_approach(self):
        """–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π."""
        result = self.admin_client.create_test_question("–ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å")
        assert result is True

# ‚ùå –ü–ª–æ—Ö–æ - –º–∞—Å—Å–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
# –ú–∏–≥—Ä–∏—Ä—É–π—Ç–µ –ø–æ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É –∑–∞ —Ä–∞–∑
```

### 2. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
```python
# framework/auth/__init__.py
from .auth_manager import AuthManager, get_session_cookie, get_auth_cookies
from .cookie_provider import CookieProvider

# –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—Ç–∞—Ä—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏
# –°—Ç–∞—Ä—ã–µ –∏–º–ø–æ—Ä—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
def get_session_cookie(role: str = "admin") -> str:
    """–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å."""
    return get_session_cookie(role)  # –ù–æ–≤—ã–π –º–µ—Ç–æ–¥
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
```bash
# ‚úÖ –•–æ—Ä–æ—à–æ - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
python -m pytest tests/integration/test_migrated_file.py -v

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
python -m pytest tests/integration/test_migrated_file.py::TestClass::test_method -v -s

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
python -m pytest tests/integration/test_migrated_file.py -n 4 -v
```

## üîß –†–ï–®–ï–ù–ò–ï –ß–ê–°–¢–´–• –ü–†–û–ë–õ–ï–ú

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "ImportError: No module named 'framework.utils.auth_utils'"
**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –∏–º–ø–æ—Ä—Ç
# –ë—ã–ª–æ:
from framework.utils.auth_utils import get_session_cookie

# –°—Ç–∞–ª–æ:
from framework.auth import get_session_cookie
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "AttributeError: 'NoneType' object has no attribute 'strip'"
**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∫—É–∫
from framework.auth import get_session_cookie, validate_cookie

cookie = get_session_cookie("admin")
if cookie and validate_cookie(cookie):
    # –ö—É–∫–∞ –≤–∞–ª–∏–¥–Ω–∞
    pass
else:
    # –ö—É–∫–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω–∞, –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å
    from framework.auth import AuthManager
    manager = AuthManager()
    cookie = manager.get_session_cookie("admin", force_refresh=True)
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "Session cookie not found"
**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
import os

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫—É–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
admin_cookie = os.getenv("SESSION_COOKIE_ADMIN")
if not admin_cookie:
    print("‚ùå –ö—É–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è")
    print("üîß –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: SESSION_COOKIE_ADMIN=–≤–∞—à–∞_–∫—É–∫–∞")

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª—ã –∫—É–∫
# cookies/admin_session.txt - —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –∫—É–∫–æ–π
# cookies/admin_cookies.json - JSON —Ñ–∞–π–ª Playwright —Ñ–æ—Ä–º–∞—Ç–∞
```

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- [–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã](../GETTING_STARTED.md) - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](../ARCHITECTURE.md) - –ø–æ–Ω–∏–º–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏](../COMPONENTS/AUTH_SYSTEM.md) - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- [–ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤](../TESTING/WRITING_TESTS.md) - –Ω–æ–≤—ã–µ –ø–æ–¥—Ö–æ–¥—ã
- [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](../TESTING/BEST_PRACTICES.md) - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- [Pytest –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.pytest.org/)
- [Playwright –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://playwright.dev/python/docs/intro)
- [Allure –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.qameta.io/allure/)

## ü§ù –ü–û–î–î–ï–†–ñ–ö–ê

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [—á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã](../REFERENCES/FAQ.md)
2. –ò–∑—É—á–∏—Ç–µ [–ø—Ä–∏–º–µ—Ä—ã](../REFERENCES/EXAMPLES.md)
3. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ Lead SDET Architect

**–£–¥–∞—á–∏ –≤ –º–∏–≥—Ä–∞—Ü–∏–∏! üöÄ**
