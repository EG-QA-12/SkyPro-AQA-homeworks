## üîß __–ö–û–ù–ö–†–ï–¢–ù–´–ï –®–ê–ì–ò –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê:__

### __–®–∞–≥ 1: –í—ã–±—Ä–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É__

–¢—ã –±—ã –ø—Ä–µ–¥–ø–æ—á–µ–ª:

- __–ï–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É__ - –æ–¥–∏–Ω –º–µ–Ω–µ–¥–∂–µ—Ä —Ä–µ—à–∞–µ—Ç –≤—Å—ë, –Ω–æ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –¥–ª—è API/Playwright?
- __–†–∞–∑–¥–µ–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É__ - –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ç–µ—Å—Ç–æ–≤?

### __–®–∞–≥ 2: –û—á–∏—Å—Ç–∏—Ç—å framework/utils/ (17+ —Ñ–∞–π–ª–æ–≤)__

```javascript
‚úÖ –£–î–ê–õ–ò–¢–¨ (–Ω–µ –Ω—É–∂–Ω—ã):
- smart_auth_manager_backup*.py (6 —Ñ–∞–π–ª–æ–≤)
- auth_cookie_provider.py (–¥—É–±–ª–∏–∫–∞—Ç)
- auth_operations.py & auth_utils.py (GUI specific)  
- api_auth.py (—Å—Ç–∞—Ä—ã–π, –Ω–µ —Ç–≤–æ—ë)

üóÇÔ∏è –ü–ï–†–ï–ù–ï–°–¢–ò –≤ framework/auth/utils/:
- cookie_constants.py, cookie_helper.py

ü§î –û–¶–ï–ù–ò–¢–¨ –ò –†–ï–®–ò–¢–¨:
- auth.py - —á—Ç–æ –≤ –Ω—ë–º –ø–æ–ª–µ–∑–Ω–æ–≥–æ?
```

### __–®–∞–≥ 3: –£–ª—É—á—à–∏—Ç—å framework/auth/__

```javascript
‚úÖ –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ —Ä–∞–±–æ—á–∏–π smart_auth_api_approach.py
üß™ –î–û–ë–ê–í–ò–¢–¨ Browser –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Playwright (–∫–∞–∫ backup_3.py)
üîß –û–ë–™–ï–î–ò–ù–ò–¢–¨ CookieProvider –∏–∑ auth/ –∏ utils/
```

### __–®–∞–≥ 4: –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–º–ø–æ—Ä—Ç–æ–≤__

```python
# –ù–æ–≤–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
from framework.auth import get_session_cookie, get_browser_auth

# –î–ª—è API —Ç–µ—Å—Ç–æ–≤
from framework.auth.api import APIManager

# –î–ª—è Browser —Ç–µ—Å—Ç–æ–≤  
from framework.auth.browser import BrowserManager
```

---

## ‚ùì __–í–û–ü–†–û–°–´ –î–õ–Ø –†–ï–®–ï–ù–ò–Ø:__

1. __–ö–∞–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ?__

   - –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–ø—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞)?
   - –†–∞–∑–¥–µ–ª—å–Ω–∞—è (–±–æ–ª—å—à–µ –∏–∑–æ–ª—è—Ü–∏–∏)?

2. __–ë—É–¥—É—Ç –ª–∏ GUI —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é?__

   - –°–µ–π—á–∞—Å —É —Ç–µ–±—è —Ç–æ–ª—å–∫–æ `smart_auth_api_approach.py` —Ä–∞–±–æ—Ç–∞–µ—Ç

3. __–ù—É–∂–Ω—ã –ª–∏ —Ä–∞–∑–Ω—ã–µ –∫—É–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥—Å–∏—Å—Ç–µ–º BLL?__

   - –¢–≤–æ—ë –æ—Ç–∫—Ä—ã—Ç–∏–µ: –∫—É–∫–∏ –∏–∑ ca.bll.by —Ä–∞–±–æ—Ç–∞—é—Ç –¥–ª—è expert.bll.by

4. __–ö–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑ utils/ –í–ê–ñ–ù–´ –∏ –ù–ï –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ?__

---

## üéØ __–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:__


## üìä __–ò–¢–û–ì –ê–ù–ê–õ–ò–ó–ê + –£–¢–û–ß–ù–ï–ù–ù–´–ô –ü–õ–ê–ù –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê__

–ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é __–ï–î–ò–ù–£–Æ –ê–†–•–ò–¢–ï–ö–¢–£–†–£__ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ API –∏ Browser –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

---

### üéØ __–£–¢–û–ß–ù–ï–ù–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê:__

```javascript
framework/auth/
‚îú‚îÄ‚îÄ __init__.py                 # –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ manager.py                  # Unified manager —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º API/Browser
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ manager.py             # smart_auth_api_approach.py (-> APIManager)
‚îÇ   ‚îî‚îÄ‚îÄ parallel_auth.py       # –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏–∑ api_auth.py 
‚îú‚îÄ‚îÄ browser/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ manager.py             # Playwright –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏–∑ backup_3.py
‚îÇ   ‚îî‚îÄ‚îÄ selectors.py          # –£–º–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã —Ñ–æ—Ä–º
‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îú‚îÄ‚îÄ cookie_provider.py     # –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä (framework/auth/cookie_provider.py)
‚îÇ   ‚îú‚îÄ‚îÄ file_provider.py
‚îÇ   ‚îî‚îÄ‚îÄ env_provider.py
‚îî‚îÄ‚îÄ core/
    ‚îú‚îÄ‚îÄ types.py               # Pydantic –º–æ–¥–µ–ª–∏ (AuthResult, ...)
    ‚îú‚îÄ‚îÄ validators.py          # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—É–∫
    ‚îú‚îÄ‚îÄ session_manager.py     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ –∏–∑ framework/auth/
    ‚îî‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
```

---

### üîß __–ö–û–ù–ö–†–ï–¢–ù–´–ï –®–ê–ì–ò (–ü–†–ò–û–†–ò–¢–ï–¢–´):__

#### __üü¢ –®–ê–ì 1: –°–û–ó–î–ê–¢–¨ –û–°–ù–û–í–£ (framework/auth/)__

```javascript
‚úÖ –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ä–∞–±–æ—á–∏–π –∫–æ–¥:
- smart_auth_api_approach.py ‚Üí framework/auth/api/manager.py
- backup_3.py (browser –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è) ‚Üí framework/auth/browser/manager.py

‚úÖ –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:
- framework/auth/cookie_provider.py (–≥–æ—Ç–æ–≤—ã–π)
- framework/utils/cookie_constants.py ‚Üí framework/auth/core/

‚úÖ –°–æ–∑–¥–∞—Ç—å —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ framework/auth/__init__.py
```

#### __üü† –®–ê–ì 2: –û–ß–ò–°–¢–ò–¢–¨ framework/utils/ (–°–ù–ò–ó–ò–¢–¨ –° 17 –î–û 8 –§–ê–ô–õ–û–í)__

```javascript
‚úÖ –£–î–ê–õ–ò–¢–¨ –ü–û–õ–ù–û–°–¢–¨–Æ (–¥—É–±–ª–∏–∫–∞—Ç—ã/—É—Å—Ç–∞—Ä–µ–≤—à–µ–µ):
- smart_auth_manager_backup*.py (6 —Ñ–∞–π–ª–æ–≤) - ‚ùå DELETE
- auth_cookie_provider.py - ‚ùå DELETE (–¥—É–±–ª–∏–∫–∞—Ç)
- api_auth.py - ‚ö†Ô∏è –û–¶–ï–ù–ò–¢–¨: –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª–µ–∑–Ω–∞?
- auth_operations.py - ‚ùå MOVE ‚Üí framework/app/pages/login_page.py
- auth_utils.py - ‚ùå MERGE —Å framework/auth/utils/

üü° –ü–ï–†–ï–ù–ï–°–¢–ò –í –î–†–£–ì–ò–ï –ú–ï–°–¢–ê:
- cookie_helper.py ‚Üí framework/auth/providers/utils.py
- db_utils.py, gui_helpers.py ‚Üí framework/app/
- sso_requests.py ‚Üí framework/api/ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

‚úÖ –û–°–¢–ê–í–ò–¢–¨ (–ù–ï –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ):
- question_factory.py üü¢
- html_parser.py üü¢  
- http_assert_utils.py üü¢
- url_utils.py üü¢
- screenshot_utils.py üü¢
- answer_utils.py üü¢
```

#### __üü° –®–ê–ì 3: –î–û–ë–ê–í–ò–¢–¨ –í–û–ó–ú–û–ñ–ù–û–°–¢–ò__

```javascript
üÜï –ù–æ–≤—ã–π Unified Manager:
class AuthManager:
    def get_auth_for_test(self, test_type="api") -> AuthResult:
        if test_type == "api":
            return self.api_manager.get_valid_session_cookie()
        elif test_type == "browser": 
            return self.browser_manager.get_valid_storage_state()

üÜï Auto-detection test type:
- pytest markers/plugins –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ —Ç–µ—Å—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ API vs Browser –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```

---

### ‚ùì __–ö–õ–Æ–ß–ï–í–´–ï –í–û–ü–†–û–°–´ –î–õ–Ø –¢–ï–ë–Ø:__

1. __–°–æ—Ö—Ä–∞–Ω—è—Ç—å api_auth.py (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é)?__

   - –í –Ω–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ thread-safe output
   - –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏?

2. __–ë—É–¥–µ—Ç –ª–∏ Browser –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω—É–∂–Ω–∞?__

   - –°–µ–π—á–∞—Å integration —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å API

3. __–ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ç–∏–ø —Ç–µ—Å—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏?__

   - pytest.mark.api?
   - –ü–æ —Ç–∏–ø—É —Ñ–∏–∫—Å—Ç—É—Ä—ã?

4. __–û—Å—Ç–∞–≤–∏—Ç—å —á—Ç–æ-—Ç–æ –∏–∑ GUI —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤?__

   - auth_operations.py —Å–æ–¥–µ—Ä–∂–∏—Ç Browser UI –ª–æ–≥–∏–∫—É

---

### üìã __–ù–û–í–´–ô –ü–õ–ê–ù –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê:__

–¢—ã –≥–æ—Ç–æ–≤ –ø–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç—Ç–æ–≥–æ –ø–ª–∞–Ω–∞? –ú—ã –º–æ–∂–µ–º –Ω–∞—á–∞—Ç—å —Å —Å–æ–∑–¥–∞–Ω–∏—è –æ—Å–Ω–æ–≤—ã –≤ `framework/auth/` –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ä–∞–±–æ—á–µ–≥–æ –∫–æ–¥–∞.

__–û–¥–æ–±—Ä—è–µ—à—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É?__ üöÄ

–ï—Å–ª–∏ –¥–∞ - –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ Act Mode –∏ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞–µ–º!

### üí° __–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê: –ú–ò–ù–ò–ú–ê–õ–¨–ù–´–ô –†–ï–§–ê–ö–¢–û–†ING__

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –±—ã—Å—Ç—Ä–µ–µ - –ø—Ä–æ—Å—Ç–æ:

```javascript
1. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ backup_*.py –∫—Ä–æ–º–µ api_approach  
2. –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ api_approach.py ‚Üí framework/auth/
3. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –∞–ª–∏–∞—Å—ã
```

__–ß—Ç–æ –≤—ã–±–µ—Ä–µ—à—å?__
