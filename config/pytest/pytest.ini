[pytest]
# Основная конфигурация pytest для фреймворка автоматизации

# Минимальная версия pytest
minversion = 7.0

# Директории для поиска тестов
testpaths = 
    tests
    projects

# Паттерны имен тестовых файлов
python_files = test_*.py *_test.py

# Паттерны имен тестовых функций и методов
python_functions = test_*

# Паттерны имен тестовых классов
python_classes = Test* *Tests

# Маркеры (теги) для категоризации тестов
markers =
    smoke: Smoke тесты (критически важная функциональность)
    regression: Регрессионные тесты (полная проверка функций)
    critical: Критичные тесты (блокирующие релиз при падении)
    auth: Тесты авторизации и аутентификации
    ui: UI тесты (интерфейс пользователя)
    api: API тесты (интеграция и контракты)
    database: Тесты базы данных
    slow: Медленные тесты (более 30 секунд)
    integration: Интеграционные тесты
    e2e: End-to-end тесты
    user_journey: Пользовательские сценарии
    admin_workflow: Административные функции
    cross_browser: Кроссбраузерные тесты
    mobile: Мобильные тесты
    infrastructure: Инфраструктурные тесты

# Дополнительные опции командной строки
addopts = 
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --maxfail=5
    --disable-warnings
    --color=yes
    
# Настройки логирования
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Фильтрация предупреждений
filterwarnings =
    ignore::pytest.PytestUnraisableExceptionWarning
    ignore::DeprecationWarning
    ignore::UserWarning:requests.*

# Настройки для параллельного выполнения (pytest-xdist)
# Раскомментируйте для использования
# addopts = --numprocesses=auto

# Настройки покрытия кода (pytest-cov)
# Раскомментируйте для анализа покрытия
# addopts = --cov=framework --cov-report=html --cov-report=term-missing
