"""
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –¥–ª—è GUI —Ä–µ–∂–∏–º–∞ —Å –∑–∞–º–µ–¥–ª–µ–Ω–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏.

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã –≤ GUI —Ä–µ–∂–∏–º–µ.
–¢–µ—Å—Ç –≤–∫–ª—é—á–∞–µ—Ç:
1. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π GUI —Ä–µ–∂–∏–º (headless=False)
2. –ó–∞–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏  
3. –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
4. –ü—Ä–æ–≤–µ—Ä–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –≤–∏–¥–∏–º–æ–º –±—Ä–∞—É–∑–µ—Ä–µ
"""
import time
from playwright.sync_api import sync_playwright

def test_demo_gui_mode():
    """
    –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ GUI —Ä–µ–∂–∏–º–µ.
    
    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
    - –û—Ç–∫—Ä—ã—Ç–∏–µ –≤–∏–¥–∏–º–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞
    - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–∞–π—Ç
    - –ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    - –ü—Ä–æ–≤–µ—Ä–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    """
    print("\n" + "="*60)
    print("üöÄ –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø GUI –†–ï–ñ–ò–ú–ê")
    print("="*60)
    print("üìù –ó–∞–ø—É—Å–∫ –≤–∏–¥–∏–º–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞...")
    
    with sync_playwright() as p:
        # –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û –æ—Ç–∫–ª—é—á–∞–µ–º headless —Ä–µ–∂–∏–º
        browser = p.chromium.launch(
            headless=False,  # GUI —Ä–µ–∂–∏–º
            slow_mo=1000,    # –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏
            devtools=False,  # –ù–µ –æ—Ç–∫—Ä—ã–≤–∞–µ–º DevTools
            args=[
                "--start-maximized",  # –ú–∞–∫—Å–∏–º–∏–∑–∏—Ä—É–µ–º –æ–∫–Ω–æ
                "--disable-web-security",
                "--allow-running-insecure-content"
            ]
        )
        
        print("‚úÖ –ë—Ä–∞—É–∑–µ—Ä –∑–∞–ø—É—â–µ–Ω –≤ GUI —Ä–µ–∂–∏–º–µ!")
        print("üëÄ –¢–µ–ø–µ—Ä—å –≤—ã –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –æ–∫–Ω–æ –±—Ä–∞—É–∑–µ—Ä–∞ Chromium")
        
        # –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
        context = browser.new_context(
            viewport={"width": 1280, "height": 720},
            locale="ru-RU"
        )
        
        page = context.new_page()
        
        print("üåê –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å–∞–π—Ç...")
        response = page.goto("https://ca.bll.by", wait_until="domcontentloaded")
        
        if response:
            print(f"üìä HTTP —Å—Ç–∞—Ç—É—Å: {response.status}")
            print(f"üîó URL: {page.url}")
            print(f"üìÑ –ó–∞–≥–æ–ª–æ–≤–æ–∫: {page.title()}")
            
            # –ñ–¥–µ–º 3 —Å–µ–∫—É–Ω–¥—ã, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–µ–ª —Å—Ç—Ä–∞–Ω–∏—Ü—É
            print("‚è±Ô∏è –ü–∞—É–∑–∞ 3 —Å–µ–∫ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã...")
            time.sleep(3)
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            print("üîç –ò—â–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ...")
            
            # –°–ø–∏—Å–æ–∫ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
            elements_to_check = [
                "input[type='email']",
                "input[type='password']", 
                "button[type='submit']",
                ".login-form",
                "#login",
                "#password"
            ]
            
            found_elements = []
            for selector in elements_to_check:
                try:
                    if page.is_visible(selector, timeout=1000):
                        found_elements.append(selector)
                        print(f"   ‚úÖ –ù–∞–π–¥–µ–Ω —ç–ª–µ–º–µ–Ω—Ç: {selector}")
                except:
                    pass
            
            if found_elements:
                print(f"üéØ –ù–∞–π–¥–µ–Ω–æ {len(found_elements)} —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ")
            else:
                print("‚ö†Ô∏è –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º cookies
            cookies = context.cookies()
            print(f"üç™ –ù–∞–π–¥–µ–Ω–æ cookies: {len(cookies)}")
            
            # –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–∞—É–∑–∞
            print("‚è±Ô∏è –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–∞—É–∑–∞ 5 —Å–µ–∫...")
            time.sleep(5)
        
        print("üèÅ –ó–∞–∫—Ä—ã–≤–∞–µ–º –±—Ä–∞—É–∑–µ—Ä...")
        browser.close()
        
    print("‚úÖ –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê!")
    print("üìù –ï—Å–ª–∏ –≤—ã –≤–∏–¥–µ–ª–∏ –æ–∫–Ω–æ –±—Ä–∞—É–∑–µ—Ä–∞ - GUI —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç!")

if __name__ == "__main__":
    test_demo_gui_mode()
